import{g as p}from"./@ethersproject-w92F1kWw.js";import{r as l}from"./uuid-DnmYEDjT.js";const v=l.v4,a=function(n,e,t,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const i={method:n};if(o===2&&(i.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");i.params=e}if(typeof t>"u"){const f=typeof r.generator=="function"?r.generator:function(){return v()};i.id=f(i,r)}else o===2&&t===null?r.notificationIdNull&&(i.id=null):i.id=t;return i};var g=a;const h=l.v4,d=g,s=function(n,e){if(!(this instanceof s))return new s(n,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return h()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=n};var w=s;s.prototype.request=function(n,e,t,r){const o=this;let i=null;const f=Array.isArray(n)&&typeof e=="function";if(this.options.version===1&&f)throw new TypeError("JSON-RPC 1.0 does not support batching");if(f||!f&&n&&typeof n=="object"&&typeof e=="function")r=e,i=n;else{typeof t=="function"&&(r=t,t=void 0);const u=typeof r=="function";try{i=d(n,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(c){if(u)return r(c);throw c}if(!u)return i}let y;try{y=JSON.stringify(i,this.options.replacer)}catch(u){return r(u)}return this.callServer(y,function(u,c){o._parseResponse(u,c,r)}),i};s.prototype._parseResponse=function(n,e,t){if(n){t(n);return}if(!e)return t();let r;try{r=JSON.parse(e,this.options.reviver)}catch(o){return t(o)}if(t.length===3)if(Array.isArray(r)){const o=function(f){return typeof f.error<"u"},i=function(f){return!o(f)};return t(null,r.filter(o),r.filter(i))}else return t(null,r.error,r.result);t(null,r)};const E=p(w);export{E as R};
